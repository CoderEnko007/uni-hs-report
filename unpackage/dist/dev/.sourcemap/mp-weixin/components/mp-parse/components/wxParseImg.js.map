{"version":3,"sources":["webpack:///I:/uni-app/hs-report-station/components/mp-parse/components/wxParseImg.vue","webpack:///I:/uni-app/hs-report-station/components/mp-parse/components/wxParseImg.vue?3b9e","webpack:///I:/uni-app/hs-report-station/components/mp-parse/components/wxParseImg.vue?f7bd","webpack:///I:/uni-app/hs-report-station/components/mp-parse/components/wxParseImg.vue?8c43","webpack:///I:/uni-app/hs-report-station/components/mp-parse/components/wxParseImg.vue?1882"],"names":["name","data","newStyleStr","preview","props","node","type","Object","default","methods","wxParseImgTap","e","src","currentTarget","dataset","parent","$parent","wxParseImgLoad","mp","detail","width","height","recal","wxAutoImageCal","imageheight","imageWidth","tempWidth","tempHeight","attr","padding","mode","styleStr","imageHeightStyle","originalWidth","originalHeight","windowWidth","$screen","results","removeImageUrl"],"mappings":"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","file":"components/mp-parse/components/wxParseImg.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  name: 'wxParseImg',\n  data() {\n    return {\n      newStyleStr: '',\n      preview: true,\n    };\n  },\n  props: {\n    node: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n  },\n  methods: {\n    wxParseImgTap(e) {\n      if (!this.preview) return;\n      const { src } = e.currentTarget.dataset;\n      if (!src) return;\n      let parent = this.$parent;\n      while(!parent.preview || typeof parent.preview !== 'function') {// TODO 遍历获取父节点执行方法\n      \tparent = parent.$parent;\n      }\n      parent.preview(src, e);\n    },\n    // 图片视觉宽高计算函数区\n    wxParseImgLoad(e) {\n      const { src } = e.currentTarget.dataset;\n      if (!src) return;\n      const { width, height } = e.mp.detail;\n      const recal = this.wxAutoImageCal(width, height);\n      const { imageheight, imageWidth } = recal;\n      // 图片容器有30rpx左右边距时需要对宽度进行处理，否则图片会超出边界\n      // const tempWidth = (imageWidth>imageheight)&&imageWidth>=375?(imageWidth-30):imageWidth\n      // const tempHeight = imageWidth>imageheight&&imageWidth>=375?(imageheight-20):imageheight\n      let tempWidth = imageWidth\n      let tempHeight = imageheight\n      if (imageWidth>=375) {\n        tempWidth = (imageWidth-30)\n        tempHeight = 345*imageheight/imageWidth\n      }\n      if (tempHeight>500) {\n        tempHeight = 500\n        tempWidth = 500*tempWidth/imageheight\n      }\n      const { padding, mode } = this.node.attr;\n      const { styleStr } = this.node;\n      const imageHeightStyle = mode === 'widthFix' ? '' : `height: ${tempHeight}px;`;\n      this.newStyleStr = `${styleStr}; ${imageHeightStyle}; width: ${tempWidth}px; padding: 0 ${+padding}px;`;\n      // console.log(imageWidth, imageheight, tempWidth, tempHeight)\n    },\n    // 计算视觉优先的图片宽高\n    wxAutoImageCal(originalWidth, originalHeight) {\n      // 获取图片的原始长宽\n      const { padding } = this.node.attr;\n      const windowWidth = this.node.$screen.width - (2 * padding);\n      const results = {};\n\n      if (originalWidth < 60 || originalHeight < 60) {\n        const { src } = this.node.attr;\n\tlet parent = this.$parent;\n\twhile(!parent.preview || typeof parent.preview !== 'function') {\n\t\tparent = parent.$parent;\n\t}\n\tparent.removeImageUrl(src);\n        this.preview = false;\n      }\n\n      // 判断按照那种方式进行缩放\n      if (originalWidth > windowWidth) {\n        // 在图片width大于手机屏幕width时候\n        results.imageWidth = windowWidth;\n        results.imageheight = windowWidth * (originalHeight / originalWidth);\n      } else {\n        // 否则展示原来的数据\n        results.imageWidth = originalWidth;\n        results.imageheight = originalHeight;\n      }\n\n      return results;\n    },\n  },\n};\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./wxParseImg.vue?vue&type=template&id=e46346e0&\"\nimport script from \"./wxParseImg.vue?vue&type=script&lang=js&\"\nexport * from \"./wxParseImg.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('e46346e0', component.options)\n    } else {\n      api.reload('e46346e0', component.options)\n    }\n    module.hot.accept(\"./wxParseImg.vue?vue&type=template&id=e46346e0&\", function () {\n      api.rerender('e46346e0', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"I:/uni-app/hs-report-station/components/mp-parse/components/wxParseImg.vue\"\nexport default component.exports","import mod from \"-!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./wxParseImg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./wxParseImg.vue?vue&type=script&lang=js&\"","export * from \"-!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./wxParseImg.vue?vue&type=template&id=e46346e0&\""],"sourceRoot":""}