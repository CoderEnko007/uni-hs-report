{"version":3,"sources":["webpack:///I:/uni-app/hs-report-station/pages/index/index.vue","webpack:///I:/uni-app/hs-report-station/pages/index/index.vue?90c9","webpack:///I:/uni-app/hs-report-station/pages/index/index.vue?91cd","webpack:///I:/uni-app/hs-report-station/pages/index/index.vue?d6b6","webpack:///I:/uni-app/hs-report-station/pages/index/index.vue?b53c","webpack:///I:/uni-app/hs-report-station/pages/index/index.vue?9436","webpack:///I:/uni-app/hs-report-station/pages/index/index.vue?c46e"],"names":["components","NavBar","SwiperBanner","cmdNoticeBar","xModal","RankBoard","TierList","articlePage","data","hideModal","refreshFlag","banners","report_date","noticeText","text","animationData","tabbar","id","activeIndex","currentTab","rankMode","utils","gameMode","origRankList","rankData","modeFilter","selectedItem","list","value","selectedGameType","tierList","name","cname","icon","tierListNum","rangePicker","rank_range","canvasWidth","canvasHeight","computed","contentHeight","winHeight","navHeight","modePickerList","map","item","rangePickerList","methods","compareFunction","key","obj1","obj2","formatKey","replace","indexOf","initRankDataArray","sortRankData","index","hasOwnProperty","filter","game_type","toLowerCase","sort","val","win_rate","parseFloat","toFixed","popularity","push","stopPullDown","success","uni","stopPullDownRefresh","hideNavigationBarLoading","genBanners","then","res","objects","catch","err","console","log","genNotice","noticeContent","content","length","$store","dispatch","genRankData","date","Date","genArchetypeList","params","rankRange","meta","total_count","tier","handleBannerClick","articleID","navigateTo","url","articleGroupID","handleNoticeClick","handleTabBarClick","e","currentTarget","swiperChange","mp","detail","current","handleModeChange","modeBtnClick","mode","handleRankRangeChange","handleExport","showLoading","title","mask","saveImageToPhotos","handleTierClick","archetype_name","_this","getSetting","authSetting","authorize","scope","drawRankCanvas","fail","hideLoading","showModal","confirmColor","confirm","openSetting","showToast","duration","ctx","createCanvasContext","canvasMargin","headHeight","save","setFillStyle","fillRect","restore","font","textAlign","fillText","formatNowTime","colWidth","rankPower","height","num","factionColor","listHeight","itemHeight","winrateGColor","winrateRColor","winrateColor","itemNums","tierIndex","prevTierHeight","itemIndex","faction","filterDeck","decksName","v","ename","popularity1","setStrokeStyle","moveTo","lineTo","stroke","draw","setTimeout","saveCanvasImg","pages","getCurrentPages","route","destWidth","getSystemInfoSync","windowWidth","destHeight","canvasToTempFilePath","canvasId","fileType","quality","saveImageToPhotosAlbum","filePath","tempFilePath","onLoad","onPullDownRefresh","$refs","genDataList"],"mappings":"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","file":"pages/index/index.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapGetters } from 'vuex'\nimport utils from '@/utils'\nimport { gradientColor, formatNowTime, ShadeColor } from '@/utils'\nimport { getRankData, getArchetypeList, getBanners, getNotice } from '@/api/dbapi.js'\nimport NavBar from '@/components/NavBar.vue'\nimport SwiperBanner from '@/components/SwiperBanner.vue'\nimport cmdNoticeBar from \"@/components/cmd-notice-bar/cmd-notice-bar.vue\"\nimport xModal from \"@/components/x-modal/x-modal.vue\"\nimport RankBoard from '@/components/RankBoard'\nimport TierList from '@/components/TierList'\nimport articlePage from './components/articlePage'\n\n\nexport default {\n  components: {\n    NavBar,\n    SwiperBanner,\n    cmdNoticeBar,\n    xModal,\n    RankBoard,\n    TierList,\n    articlePage\n  },\n  data() {\n    return {\n      hideModal: true,\n      refreshFlag: 0,\n      banners: [],\n      report_date: '',\n      noticeText: {\n        text: '',\n        animationData: []\n      },\n      // tab切换参数\n      tabbar: [\n        {id: 'report', text: '日报' },\n        {id: 'article', text: '周报' }\n      ],\n      activeIndex: 0,\n      currentTab: 0,\n      // rank list参数\n      rankMode: utils.gameMode,\n      origRankList: [],\n      rankData: {\n        'standard': [],\n        'wild': [],\n        'arena': []\n      },\n      modeFilter: {\n        selectedItem: 0,\n        list: [\n          {text: '按胜率', value: 'win_rate'},\n          {text: '按热度', value: 'popularity'}\n        ]\n      },\n      selectedGameType: 'standard',\n      // tier list参数\n      tierList: [\n        {name: 'Tier 1', cname: '第1梯队', icon: '/static/icons-v2/tierlist-t1.png', list: []},\n        {name: 'Tier 2', cname: '第2梯队', icon: '/static/icons-v2/tierlist-t2.png', list: []},\n        {name: 'Tier 3', cname: '第3梯队', icon: '/static/icons-v2/tierlist-t3.png', list: []},\n        {name: 'Tier 4', cname: '第4梯队', icon: '/static/icons-v2/tierlist-t4.png', list: []},\n      ],\n      tierListNum: 0,\n      rangePicker: {\n        selectedItem: 0,\n        list: [\n          {text: '全分段', rank_range: 'All'},\n          {text: 'R5-R1分段', rank_range: 'One_Through_Five'},\n          {text: '传说分段', rank_range: 'Legend_Only'}\n        ]\n      },\n      // canvas参数\n      canvasWidth: 375,\n      canvasHeight: 200,\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'winWidth',\n      'winHeight',\n      'navHeight',\n      'noticeContent',\n      'decksName'\n    ]),\n    contentHeight() {\n      if (this.activeIndex == 0) {\n        return 578 + 60 * this.tierListNum + 10 + 'px'\n      } else {\n        return this.winHeight - this.navHeight - 41 + \"px\"\n      }\n    },\n    modePickerList() {\n      return this.modeFilter.list.map(item => {\n        return item.text\n      })\n    },\n    rangePickerList() {\n      return this.rangePicker.list.map(item => {\n        return item.text\n      })\n    },\n  },\n  methods: {\n    compareFunction(key) {\n      return function(obj1, obj2) {\n        let formatKey = key.replace('-', '')\n        if (key.indexOf('-') !== -1) {\n          return obj2[formatKey] - obj1[formatKey]\n        } else {\n          return obj1[formatKey] - obj2[formatKey]\n        }\n      }\n    },\n    initRankDataArray() {\n      this.rankData = {\n        'standard': [],\n        'wild': [],\n        'arena': []\n      }\n    },\n    sortRankData(data) {\n      for (let index in this.rankData) {\n        if (this.rankData.hasOwnProperty(index)) {\n          this.rankData[index] = data.filter(item => {\n            return item.game_type.toLowerCase() === index.toLowerCase()\n          })\n          if (this.modeFilter.list[this.modeFilter.selectedItem].value === 'win_rate') {\n            this.rankData[index].sort(this.compareFunction('-win_rate'))\n          } else if (this.modeFilter.list[this.modeFilter.selectedItem].value === 'popularity') {\n            this.rankData[index].sort(this.compareFunction('-popularity'))\n          }\n          this.rankData[index].map(val => {\n            val.win_rate = parseFloat(val.win_rate).toFixed(1)\n            val.popularity = parseFloat(val.popularity).toFixed(1)\n          })\n          this.rankData[index].push({})\n        }\n      }\n    },\n    stopPullDown(success) {\n      if (success) {\n        this.refreshFlag += 1;\n        if (this.refreshFlag >= 2) {\n          uni.stopPullDownRefresh();\n          uni.hideNavigationBarLoading()\n        }\n      } else {\n        uni.stopPullDownRefresh();\n        uni.hideNavigationBarLoading()\n      }\n    },\n    genBanners() {\n      getBanners().then(res => {\n        this.banners = res.objects\n        this.stopPullDown(true)\n      }).catch(err => {\n        this.stopPullDown(false)\n        console.log(err)\n      })\n    },\n    genNotice() {\n      if (this.noticeContent.hasOwnProperty('content') && this.noticeContent.content.length > 0) {\n        this.noticeText.text = this.noticeContent.content\n      } else {\n        this.$store.dispatch('getNotice').then(res => {\n          this.noticeText.text = res.content\n        })\n      }\n    },\n    genRankData() {\n      let date = formatNowTime(new Date())\n      getRankData(date, null, 27).then(res => {\n        this.initRankDataArray()\n        this.report_date = res.date\n        this.origRankList = res.list\n        this.sortRankData(this.origRankList)\n        this.stopPullDown(true)\n      }).catch(err => {\n        this.stopPullDown(false)\n        console.log(err)\n      })\n    },\n    genArchetypeList() {\n      this.tierListNum = 0\n      let params = {rankRange: this.rangePicker.list[this.rangePicker.selectedItem].rank_range}\n      getArchetypeList(params).then(res => {\n        this.tierListNum = res.meta.total_count\n        for (let index in this.tierList) {\n          if (this.tierList.hasOwnProperty(index)) {\n            this.tierList[index].list = res.objects.filter(item => {\n              return item.tier === this.tierList[index].name\n            })\n          }\n        }\n        this.stopPullDown(true)\n      }).catch(err => {\n        console.log(err)\n        this.stopPullDown(false)\n      })\n    },\n    handleBannerClick(item) {\n      if (item.articleID) {\n        uni.navigateTo({\n          url: `/pages/index/articleDetail/index?group_id=${item.articleGroupID}&id=${item.articleID}`\n        })\n      }\n    },\n    handleNoticeClick() {\n      this.hideModal = false\n    },\n    handleTabBarClick(e) {\n      this.activeIndex = e.currentTarget.id;\n      this.currentTab = this.activeIndex;\n    },\n    swiperChange(e) {\n      this.currentTab = e.mp.detail.current;\n      this.activeIndex = this.currentTab;\n    },\n    handleModeChange(e) {\n      this.modeFilter.selectedItem = e.mp.detail.value\n      this.sortRankData(this.origRankList)\n    },\n    modeBtnClick(item) {\n      this.selectedGameType = item.mode\n    },\n    handleRankRangeChange(e) {\n      this.rangePicker.selectedItem = e.mp.detail.value\n      this.genArchetypeList()\n    },\n    handleExport() {\n      console.log('handleExport')\n      uni.showLoading({\n        title: '日报生成中',\n        mask: true\n      })\n      this.saveImageToPhotos()\n    },\n    handleTierClick(item) {\n      uni.navigateTo({\n        url: `/pages/decks/archetypeDetail/index?name=${item.archetype_name}`\n      })\n    },\n    \n    // canvas 绘图\n    saveImageToPhotos () {\n      let _this = this\n      // 相册授权\n      uni.getSetting({\n        success(res) {\n          // 进行授权检测，未授权则进行弹层授权\n          if (!res.authSetting['scope.writePhotosAlbum']) {\n            uni.authorize({\n              scope: 'scope.writePhotosAlbum',\n              success () {\n                _this.drawRankCanvas()\n              },\n              fail() {\n                uni.hideLoading()\n                uni.showModal({\n                  content: '您尚未打开相册使用权限，是否去设置打开？',\n                  confirmColor: '#433e88',\n                  success (res) {\n                    if (res.confirm) {\n                      uni.openSetting({\n                        success(res) {\n                          console.log(res.authSetting)\n                        }\n                      })\n                    }\n                  }\n                })\n              }\n            })\n          } else {\n            // 已授权则直接进行保存图片\n            console.log('PhotosAlbum已授权')\n            _this.drawRankCanvas()\n          }\n        },\n        fail(res) {\n          uni.hideLoading()\n          uni.showToast({\n            title: '图片保存失败',\n            icon: 'none',\n            duration: 2000\n          })\n        }\n      })\n    },\n    drawRankCanvas() {\n      let ctx = uni.createCanvasContext('dailyReport')\n      let canvasMargin = 0\n      this.canvasWidth = 300+canvasMargin\n      this.canvasHeight = 720\n      let headHeight = 120\n      ctx.save()\n      ctx.setFillStyle('#fff')\n      ctx.fillRect(0, 0, this.canvasWidth, headHeight)\n      ctx.restore()\n      ctx.save()\n      ctx.font = 'normal bold 12px sans-serif';\n      ctx.setFillStyle('#433e88')\n      ctx.textAlign = 'center'\n      ctx.fillText('微信小程序：炉石传说情报站', this.canvasWidth/2, 20)\n      ctx.setFillStyle('#000')\n      ctx.font = 'normal bold 16px sans-serif';\n      ctx.fillText('卡组强度排行', this.canvasWidth/2, 45)\n      ctx.restore()\n      let rankRange = this.rangePicker.list[this.rangePicker.selectedItem].text\n      ctx.font = 'normal normal 12px sans-serif';\n      ctx.textAlign = 'left'\n      ctx.fillText('分段：', canvasMargin+30, 70)\n      ctx.save()\n      ctx.font = 'normal bold 13px sans-serif';\n      ctx.setFillStyle('red')\n      ctx.fillText(rankRange, canvasMargin+65, 70)\n      ctx.restore()\n      ctx.save()\n      ctx.font = 'normal normal 12px sans-serif';\n      ctx.setFillStyle('#000')\n      ctx.textAlign = 'right'\n      let date = new Date()\n      ctx.fillText('时间：'+utils.formatNowTime(date), this.canvasWidth-canvasMargin-30, 70)\n      ctx.restore()\n\n      ctx.textAlign = 'center'\n      ctx.font = 'normal normal 13px sans-serif';\n      let colWidth = (this.canvasWidth-canvasMargin*2)/4\n      ctx.fillText('强 度', colWidth/2+canvasMargin, 95)\n      ctx.fillText('卡 组', colWidth+colWidth/2+canvasMargin, 95)\n      ctx.fillText('胜 率', colWidth*2+colWidth/2+canvasMargin, 95)\n      ctx.fillText('热 度', colWidth*3+colWidth/2+canvasMargin, 95)\n\n      let rankPower = [\n        {name: '第1梯队', height:0, num: 0},\n        {name: '第2梯队', height:0, num: 0},\n        {name: '第3梯队', height:0, num: 0},\n        {name: '第4梯队', height:0, num: 0},\n      ]\n      let factionColor = {'Druid': '#f79647', 'Hunter': '#9bbb56', 'Mage': '#b8dee9', 'Paladin': '#e6b8b8',\n                          'Priest': '#e5e5e5', 'Rogue': '#ffff01', 'Shaman': '#538dd6', 'Warlock': '#cdc0da', 'Warrior': '#c5bd98'}\n      let listHeight = 0\n      let itemHeight = 25\n      let winrateGColor = gradientColor('#239c15', '#297607', this.tierList[0].list.length+this.tierList[1].list.length)\n      let winrateRColor = gradientColor('#889400', '#ff5630', this.tierList[2].list.length+this.tierList[3].list.length)\n      let winrateColor = [...winrateGColor, ...winrateRColor]\n      let itemNums = 0\n      for (let tierIndex in this.tierList) {\n        if (this.tierList.hasOwnProperty(tierIndex)) {\n          if (tierIndex === '__proto__') {\n            continue\n          }\n          rankPower[tierIndex].height=this.tierList[tierIndex].list.length*itemHeight+1 // 每个梯队后面加1px的分割线\n          rankPower[tierIndex].num = this.tierList[tierIndex].list.length\n          let prevTierHeight = 0\n          if (tierIndex > 0) {\n            prevTierHeight =  listHeight\n          }\n          listHeight += rankPower[tierIndex].height\n          ctx.save()\n          ctx.setFillStyle('#fbf3e8')\n          ctx.fillRect(canvasMargin, headHeight+prevTierHeight-17, colWidth, rankPower[tierIndex].height)\n          ctx.restore()\n          ctx.save()\n          ctx.font = 'normal bold 12px sans-serif'\n          ctx.setFillStyle('#34383b')\n          ctx.fillText(rankPower[tierIndex].name, colWidth/2+canvasMargin, headHeight+prevTierHeight)\n          ctx.restore()\n          let list = this.tierList[tierIndex].list\n          for (let itemIndex in list) {\n            if (list.hasOwnProperty(itemIndex)) {\n              if (itemIndex === '__proto__') {\n                continue\n              }\n              ctx.save()\n              ctx.setFillStyle(factionColor[list[itemIndex].faction])\n              ctx.fillRect(canvasMargin+colWidth, headHeight+prevTierHeight+itemIndex*itemHeight-17, colWidth, itemHeight)\n              ctx.setFillStyle('#000')\n              ctx.font = 'normal normal 12px sans-serif'\n              let filterDeck = this.decksName.filter(v => {\n                return v.ename === list[itemIndex].archetype_name\n              })\n              let cname = filterDeck.length>0?filterDeck[0].cname:list[itemIndex].archetype_name\n              ctx.fillText(cname, colWidth/2+canvasMargin+colWidth, headHeight+prevTierHeight+itemIndex*itemHeight)\n              ctx.restore()\n              ctx.save()\n              if (itemNums%2 === 0) {\n                ctx.setFillStyle('#fff')\n              } else {\n                ctx.setFillStyle('#faf8f9')\n              }\n              ctx.fillRect(canvasMargin+2*colWidth, headHeight+prevTierHeight+itemIndex*itemHeight-17, 2*colWidth, itemHeight)\n              ctx.setFillStyle('#faf8f9')\n              ctx.restore()\n              ctx.save()\n              ctx.font = 'normal bold 12px sans-serif'\n              ctx.setFillStyle(winrateColor[itemNums++])\n              ctx.fillText(list[itemIndex].win_rate+'%', colWidth/2+canvasMargin+colWidth*2, headHeight+prevTierHeight+itemIndex*itemHeight)\n              ctx.restore()\n              if (list[itemIndex].popularity1) {\n                ctx.fillText(list[itemIndex].popularity1.toFixed(1)+'%', colWidth/2+canvasMargin+colWidth*3, headHeight+prevTierHeight+itemIndex*itemHeight)\n              } else {\n                ctx.fillText('暂无', colWidth/2+canvasMargin+colWidth*3, headHeight+prevTierHeight+itemIndex*itemHeight)\n              }\n            }\n          }\n          ctx.save()\n          ctx.setStrokeStyle('#ccc')\n          ctx.moveTo(canvasMargin, headHeight+prevTierHeight-17)\n          ctx.lineTo(this.canvasWidth-canvasMargin, headHeight+prevTierHeight-17)\n          ctx.stroke()\n          ctx.restore()\n        }\n      }\n      ctx.setStrokeStyle('#ccc')\n      ctx.moveTo(canvasMargin, headHeight+listHeight-17)\n      ctx.lineTo(this.canvasWidth-canvasMargin, headHeight+listHeight-17)\n      ctx.stroke()\n      ctx.save()\n      ctx.setFillStyle('#fff')\n      ctx.fillRect(0, headHeight+listHeight-17, this.canvasWidth, 30)\n      ctx.setFillStyle('#433e88')\n      ctx.font = 'normal bold 12px sans-serif';\n      ctx.textAlign = 'right'\n      ctx.fillText('数据源：HSReplay', this.canvasWidth-canvasMargin-10, headHeight+listHeight)\n      ctx.restore()\n      this.canvasHeight = headHeight+listHeight+10\n\n      let _this = this\n      ctx.draw(false, function(e) {\n        setTimeout(function() {\n          _this.saveCanvasImg()\n        }, 1000)\n      })\n    },\n    saveCanvasImg() {\n      let pages = getCurrentPages();\n      if (pages[pages.length-1].route !== 'pages/index/index') {\n        return\n      }\n      let destWidth = 375 * 750 / uni.getSystemInfoSync().windowWidth\n      let destHeight = (this.canvasHeight * 375 / this.canvasWidth) * 750 / uni.getSystemInfoSync().windowWidth\n      uni.canvasToTempFilePath({\n        canvasId: 'dailyReport',\n        destWidth: destWidth,\n        destHeight: destHeight,\n        fileType: 'jpg',\n        quality: 1,\n        success(res) {\n          uni.saveImageToPhotosAlbum({\n            filePath: res.tempFilePath,\n            success(res) {\n              uni.hideLoading()\n              uni.showToast({\n                title: '图片已保存到相簿',\n                duration: 2000\n              })\n            },\n            fail(err) {\n              uni.hideLoading()\n              uni.showToast({\n                title: '图片保存失败',\n                icon: 'none',\n                duration: 2000\n              })\n            }\n          })\n        },\n        fail(err) {\n          console.log('error', err)\n          uni.hideLoading()\n          uni.showToast({\n            title: '图片生成失败',\n            icon: 'none',\n            duration: 2000\n          })\n        }\n      })\n    },\n  },\n  onLoad() {\n    this.genBanners()\n    this.genRankData()\n    this.genArchetypeList()\n    this.genNotice()\n  },\n  onPullDownRefresh() {\n    this.genBanners()\n    this.genRankData()\n    this.genArchetypeList()\n    this.$refs.articlePage.genDataList(true)\n  },\n}\n","// extracted by mini-css-extract-plugin","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=bbbcbd46&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=bbbcbd46&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bbbcbd46\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('bbbcbd46', component.options)\n    } else {\n      api.reload('bbbcbd46', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=bbbcbd46&scoped=true&\", function () {\n      api.rerender('bbbcbd46', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"I:/uni-app/hs-report-station/pages/index/index.vue\"\nexport default component.exports","import mod from \"-!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import mod from \"-!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js??ref--8-oneOf-1-4!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=bbbcbd46&scoped=true&lang=scss&\"; export default mod; export * from \"-!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js??ref--8-oneOf-1-4!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=bbbcbd46&scoped=true&lang=scss&\"","export * from \"-!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\web_workspace\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./index.vue?vue&type=template&id=bbbcbd46&scoped=true&\""],"sourceRoot":""}