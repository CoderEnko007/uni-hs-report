(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/decks/components/ArchetypeList"],{"7d55":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("eaab")),i=n("2f62"),r=n("6110");function o(e){return e&&e.__esModule?e:{default:e}}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){s(e,t,n[t])})}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(){return n.e("components/HeroesPanel").then(n.bind(null,"1616"))},u=function(){return n.e("components/DeckTable").then(n.bind(null,"9edf"))},l=function(){return n.e("components/load-more").then(n.bind(null,"e201"))},f={name:"ArchetypeList",props:["listData"],components:{HeroesPanel:d,DeckTable:u,loadMore:l},data:function(){return{orderBy:"",normalOrder:"/static/icons-v2/rank-normal.png",upOrder:"/static/icons-v2/rank-up.png",downOrder:"/static/icons-v2/rank-down.png",factionIcons:[],selectedFaction:{id:"Druid",name:"德鲁伊",data:[]},orderFilter:[{id:"games",name:"对局数"},{id:"popularity",name:"热度"},{id:"winrate",name:"胜率"}],rangePicker:{selectedItem:0,list:[{text:"全分段",rank_range:"All"},{text:"R5-R1分段",rank_range:"One_Through_Five"},{text:"传说分段",rank_range:"Legend_Only"}]},loading:!0}},computed:c({},(0,i.mapGetters)(["decksName","navHeight","winWidth","winHeight"]),{genTableData:function(){return this.sortTableData(),this.selectedFaction.data},genFactionIcon:function(){return a.default.faction[this.selectedFaction.id].image},rangePickerList:function(){return this.rangePicker.list.map(function(e){return e.text})}}),methods:{compareFunction:function(e){return function(t,n){var a=e.replace("-","");return-1!==e.indexOf("-")?n[a]-t[a]:t[a]-n[a]}},swapItems:function(e,t){return e.push(e[t]),e.splice(t,1),e},sortTableData:function(){if(this.orderBy){this.selectedFaction.data.sort(this.compareFunction(this.orderBy));var e=this.selectedFaction.data,t=null;for(var n in e)e.hasOwnProperty(n)&&"Other"===e[n].ename&&(t=n);t&&this.swapItems(this.selectedFaction.data,t)}},genFactionIcons:function(){for(var e in this.factionIcons=[],a.default.faction)a.default.faction.hasOwnProperty(e)&&this.factionIcons.push({id:e,name:a.default.faction[e].name,image:a.default.faction[e].image})},genWinRateData:function(){var e=this;wx.showNavigationBarLoading();var t={faction:this.selectedFaction.id,rankRange:this.rangePicker.list[this.rangePicker.selectedItem].rank_range};(0,r.getWinRateData)(t).then(function(t){var n=null;for(var a in e.selectedFaction.data=[],t)t.hasOwnProperty(a)&&function(){var i=t[a].archetype;"other"===i.toLowerCase()&&(n=a,i=e.selectedFaction.id);var r=e.decksName.filter(function(t){return t.ename===i&&t.faction===e.selectedFaction.id})[0],o={deckName:r?r.cname:t[a].archetype,ename:t[a].archetype,games:t[a].games,winrate:t[a].winrate.toFixed(1),popularity:t[a].popularity.toFixed(1)};e.selectedFaction.data.push(o)}();if(n){var i=e.selectedFaction.data[n];i.deckName="其他",e.selectedFaction.data.splice(n,1),e.selectedFaction.data.push(i)}e.loading=!1,wx.stopPullDownRefresh(),wx.hideNavigationBarLoading()}).catch(function(t){e.loading=!1,console.log(t),wx.stopPullDownRefresh(),wx.hideNavigationBarLoading()})},handleIconsClick:function(e){this.selectedFaction={id:e.id,name:e.name,data:[]},this.genWinRateData()},handleOrderChange:function(e){this.orderBy.indexOf(e.id)>=0?this.orderBy="-"===this.orderBy.split("")[0]?e.id:"-"+e.id:this.orderBy="-"+e.id,this.sortTableData()},handleItemClick:function(e){"Other"===e.ename?wx.showToast({title:"还没有套牌的详细数据。",icon:"none",duration:2e3}):wx.navigateTo({url:"/pages/decks/archetypeDetail/index?name=".concat(e.ename)})},handleRankRangeChange:function(e){this.rangePicker.selectedItem=e.mp.detail.value,this.genWinRateData()}},mounted:function(){this.genFactionIcons(),this.genWinRateData()}};t.default=f},"88d1":function(e,t,n){"use strict";var a=n("e914"),i=n.n(a);i.a},cec5:function(e,t,n){"use strict";n.r(t);var a=n("7d55"),i=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);t["default"]=i.a},e914:function(e,t,n){},f3b6:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i})},f8df:function(e,t,n){"use strict";n.r(t);var a=n("f3b6"),i=n("cec5");for(var r in i)"default"!==r&&function(e){n.d(t,e,function(){return i[e]})}(r);n("88d1");var o=n("2877"),c=Object(o["a"])(i["default"],a["a"],a["b"],!1,null,"542079f5",null);t["default"]=c.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/decks/components/ArchetypeList-create-component',
    {
        'pages/decks/components/ArchetypeList-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("f8df"))
        })
    },
    [['pages/decks/components/ArchetypeList-create-component']]
]);                
