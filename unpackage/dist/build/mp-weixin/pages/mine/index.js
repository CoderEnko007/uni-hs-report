(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/index"],{"323b":function(e,n,t){"use strict";t.r(n);var o=t("751e"),i=t("dfa1");for(var a in i)"default"!==a&&function(e){t.d(n,e,function(){return i[e]})}(a);t("c878");var r=t("2877"),c=Object(r["a"])(i["default"],o["a"],o["b"],!1,null,"2f73c686",null);n["default"]=c.exports},"35be":function(e,n,t){},"751e":function(e,n,t){"use strict";var o=function(){var e=this,n=e.$createElement;e._self._c},i=[];t.d(n,"a",function(){return o}),t.d(n,"b",function(){return i})},c878:function(e,n,t){"use strict";var o=t("35be"),i=t.n(o);i.a},de9d:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(t("a34a")),i=t("2f62"),a=t("6110");function r(e){return e&&e.__esModule?e:{default:e}}function c(e,n,t,o,i,a,r){try{var c=e[a](r),u=c.value}catch(s){return void t(s)}c.done?n(u):Promise.resolve(u).then(o,i)}function u(e){return function(){var n=this,t=arguments;return new Promise(function(o,i){var a=e.apply(n,t);function r(e){c(a,o,i,r,u,"next",e)}function u(e){c(a,o,i,r,u,"throw",e)}r(void 0)})}}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(n){d(e,n,t[n])})}return e}function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var l=function(){return t.e("components/NavBar").then(t.bind(null,"661f"))},f={components:{NavBar:l},data:function(){return{videoAd:null,showVideoAdBtn:!0,deckList:[],logo:"https://cloud-minapp-18282.cloud.ifanrusercontent.com/1g9QyXTPpyOMVypO.png",codeImg:"https://cloud-minapp-18282.cloud.ifanrusercontent.com/1g9oGSrxprEojAfB.jpg"}},computed:s({},(0,i.mapGetters)(["userInfo","navHeight"]),{getDeckList:function(){return this.deckList}}),methods:{userInfoHandler:function(e){var n=this;this.$store.dispatch("getUserInfo",e).then(function(e){n.genUserCollection()}).catch(function(e){console.log(e)})},genUserCollection:function(){var e=this;this.userInfo.id?(wx.showNavigationBarLoading(),this.$store.dispatch("getCollectedDecks",this.userInfo.id).then(function(n){e.deckList=n.list.filter(function(e){return!(!e||""===e)}),wx.hideNavigationBarLoading(),wx.stopPullDownRefresh()}).catch(function(e){console.log(e),wx.hideNavigationBarLoading(),wx.stopPullDownRefresh()})):wx.stopPullDownRefresh()},handleDeckClick:function(e){var n="";n=e.trending?"/pages/decks/deckDetail/index?id=".concat(e.id,"&trending=1"):"/pages/decks/deckDetail/index?id=".concat(e.id),wx.navigateTo({url:n})},handleAboutClick:function(){wx.navigateTo({url:"/pages/mine/about/index"})},handleCollectionClick:function(){this.userInfo.id?wx.navigateTo({url:"/pages/mine/collection/index"}):wx.showToast({title:"请登录",icon:"none"})},handleHSVisionClick:function(){wx.navigateToMiniProgram({appId:"wx010ca9734f850748",path:"/pages/index/index",success:function(e){console.log(e)}})},handleClickCodeImg:function(){wx.previewImage({urls:[this.codeImg]})},handleCopyBtn:function(){wx.setClipboardData({data:"558391916",success:function(e){wx.showToast({title:"打开支付宝，首页搜索栏中直接粘贴，即可领取每日红包，金额随机",icon:"none",duration:2500})}})},handleVideoClick:function(){var e=u(o.default.mark(function e(){var n,t=this;return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=!0,n?this.videoAd&&this.videoAd.show().catch(function(){t.videoAd.load().then(function(){return videoAd.show()}).catch(function(e){console.log("激励视频 广告显示失败",e)})}):wx.showToast({title:"微信版本过低，无法播放激励视频",icon:"none",duration:2500});case 2:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}()},onLoad:function(){var e=this;wx.createRewardedVideoAd&&(this.videoAd=wx.createRewardedVideoAd({adUnitId:"adunit-e8e54c4290dbf4ad"}),this.videoAd.onClose(function(){var n=u(o.default.mark(function n(t){var i,r,c,u;return o.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(console.log("激励视频关闭",t),!(t&&t.isEnded||void 0===t)){n.next=23;break}return n.next=4,(0,a.getCustomerSetting)(e.userInfo.id);case 4:if(i=n.sent,console.log(i),r="",!(i.meta.total_count>0)){n.next=14;break}return c=i.objects[0].ad_click_num+1,n.next=11,(0,a.updateCustomerSetting)({ad_click_num:c},i.objects[0].id);case 11:r=n.sent,n.next=17;break;case 14:return n.next=16,(0,a.addCustomerSetting)({},e.userInfo.id);case 16:r=n.sent;case 17:console.log(r),u=new Date;try{wx.setStorageSync("ads_video_date",new Date(u.getFullYear(),u.getMonth(),u.getDate()).getTime()/1e3)}catch(o){console.log(o)}wx.showToast({title:"感谢！",icon:"none",duration:2500}),n.next=24;break;case 23:wx.showToast({title:"没有完整播放视频哦，喵。。。",icon:"none",duration:2500});case 24:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()),this.videoAd.onError(function(e){console.log("激励视频错误",e),wx.showToast({title:"出了点小问题，无法播放激励视频",icon:"none",duration:2500})}))},onShow:function(){this.genUserCollection()},onShareAppMessage:function(e){return{title:"炉石传说情报站",path:"/pages/index/index"}},onPullDownRefresh:function(){this.genUserCollection()}};n.default=f},dfa1:function(e,n,t){"use strict";t.r(n);var o=t("de9d"),i=t.n(o);for(var a in o)"default"!==a&&function(e){t.d(n,e,function(){return o[e]})}(a);n["default"]=i.a}},[["62c4","common/runtime","common/vendor"]]]);